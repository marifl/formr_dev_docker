# Changelog

## [Unreleased]

### Added
- `dnsmasq` service to `docker-compose.yml` for local DNS resolution of `formr.local`.
- `traefik` service to `docker-compose.yml` to act as a reverse proxy for HTTP traffic.
- `dnsmasq.conf` configuration file.
- `traefik.yml` configuration file (simplified for HTTP).
- Docker bridge network `formr_bridge_net`.
- Traefik labels to `formr_app` service for HTTP service discovery.

### Changed
- Switched all services in `docker-compose.yml` from `macvlan` network (`formr_net`) to `bridge` network (`formr_bridge_net`).
- Removed direct port mapping (443) from `traefik` service in `docker-compose.yml`.
- Removed certificate volume mount from `traefik` service in `docker-compose.yml`.
- Removed direct port mappings (80, 443) from `formr_app` service in `docker-compose.yml`.
- Removed SSL volume mount from `formr_app`, `formrmailqueue`, `formrsessionqueue` services in `docker-compose.yml`.
- Simplified `formr_app/apache/sites-enabled/formr.conf` to serve only HTTP internally, removing SSL configuration and specific VirtualHosts.
- Updated `depends_on` for `formr_app` to include `traefik` and `dnsmasq`.
- Simplified Traefik labels on `formr_app` for HTTP only.
- Simplified `traefik.yml` removing HTTPS entrypoint and TLS section.
- Changed `dnsmasq` service image in `docker-compose.yml` to `andyshinn/dnsmasq:latest` for ARM64 compatibility (Attempt 2).

### Removed
- `macvlan` network definition (`formr_net`) from `docker-compose.yml`.
- Static IP configuration and aliases from `formr_app` network definition in `docker-compose.yml`.
- Duplicate `services` and `networks` sections from `docker-compose.yml`.
- SSL configuration (`SSLEngine`, certificate directives, specific VirtualHosts) from `formr_app/apache/sites-enabled/formr.conf`.
- HTTPS entrypoint (`websecure`) and `tls` section from `traefik.yml`.
- Certificate volume mount (`./certs/local_ca`) from `traefik` service in `docker-compose.yml`.
- Port 443 mapping from `traefik` service in `docker-compose.yml`.
- HTTPS-related Traefik labels (`traefik.http.routers.formr_https.*`) from `formr_app` service in `docker-compose.yml`.
- Assumption of `./certs/local_ca` directory structure (no longer needed for this HTTP setup).